<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Excalidraw POC</title>
	
	<!-- Inline CSS -->
	<style>
		* {
		  margin: 0;
		  padding: 0;
		  box-sizing: border-box;
		}

		body {
		  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
		  background: #f5f5f5;
		  height: 100vh;
		  display: flex;
		  flex-direction: column;
		}

		header {
		  background: #fff;
		  padding: 20px;
		  border-bottom: 2px solid #e0e0e0;
		  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		}

		header h1 {
		  font-size: 24px;
		  color: #333;
		  margin-bottom: 5px;
		}

		header p {
		  font-size: 14px;
		  color: #666;
		}

		main {
		  flex: 1;
		  padding: 20px;
		  overflow: hidden;
		}

		.container {
		  max-width: 1200px;
		  margin: 0 auto;
		  height: 100%;
		  background: #fff;
		  border-radius: 8px;
		  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		  overflow: hidden;
		  border: 2px solid #e0e0e0;
		}

		.excalidraw-container {
		  width: 100%;
		  height: 100%;
		  position: relative;
		}

		/* Style the Excalidraw canvas */
		#app .excalidraw {
		  width: 100%;
		  height: 100%;
		}
	</style>
	
	<!-- React dependencies -->
	<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
	<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
	<!-- Excalidraw -->
	<script crossorigin src="https://unpkg.com/@excalidraw/excalidraw@0.17.6/dist/excalidraw.production.min.js"></script>
</head>
<body>
	<header>
		<h1>Excalidraw Viewer</h1>
		<p>Simple proof of concept - Loading local .excalidraw file</p>
	</header>
	
	<main>
		<div class="container">
			<div id="app" class="excalidraw-container"></div>
		</div>
	</main>
	
	<!-- Inline JavaScript -->
	<script>
		// Load the local Excalidraw file
		async function loadExcalidrawFile() {
		  try {
		    const response = await fetch('./assets/d1.excalidraw');
		    const data = await response.json();
		    return data;
		  } catch (error) {
		    console.error('Error loading Excalidraw file:', error);
		    return null;
		  }
		}

		// Initialize the app
		async function initApp() {
		  const appContainer = document.getElementById('app');
		  
		  // Load the Excalidraw data
		  const excalidrawData = await loadExcalidrawFile();
		  
		  if (!excalidrawData) {
		    appContainer.innerHTML = '<p style="color: red; padding: 20px;">Error loading Excalidraw file</p>';
		    return;
		  }

		  // Get the Excalidraw component from the global ExcalidrawLib
		  const Excalidraw = ExcalidrawLib.Excalidraw;

		  // Create Excalidraw component with initial data
		  const excalidrawElement = React.createElement(Excalidraw, {
		    initialData: {
		      elements: excalidrawData.elements,
		      appState: excalidrawData.appState,
		      files: excalidrawData.files || {}
		    },
		    // Optional: Listen to changes
		    // onChange: (elements, appState, files) => {
		    //   console.log('Drawing changed!', { elements, appState, files });
		    // }
		  });

		  // Render the Excalidraw component
		  ReactDOM.render(excalidrawElement, appContainer);
		  
		  console.log('Excalidraw loaded successfully!');
		}

		// Start the app when DOM is ready
		if (document.readyState === 'loading') {
		  document.addEventListener('DOMContentLoaded', initApp);
		} else {
		  initApp();
		}
	</script>
</body>
</html>
